<h1>This page has not been checked over due to the length. Some mistakes may be present!</h1>
<p>If you would like to check it, you may fork this repo and make a pull request. :)</p>
<p>The Hyperdrive API provides read and write access to hyperdrives. You can use the API by instantiating Hyperdrive instances using <a href="beaker.hyperdrive.md#beakerhyperdrivedriveurl">.drive()</a> or by using the global methods. The global methods can accept paths or URLs. If you pass a path into a global method, the current drive will be used as the target. For example, if you were on a drive <code>hyper://foobar/</code>, the following three would be equivalent: <code>javascript await beaker.hyperdrive.readdir(&#39;/&#39;) await beaker.hyperdrive.readdir(&#39;hyper://foobar/&#39;) await beaker.hyperdrive.drive(&#39;hyper://foobar/&#39;).readdir(&#39;/&#39;)</code> A hyperdrive is always allowed to read and write its own files. Applications must ask permission before writing to other hyperdrives. ## API ### beaker.hyperdrive.drive(url) Create a Hyperdrive instance. The instance provides most methods in <code>beaker.hyperdrive</code> but scoped to the given drive&#39;s URL. Unlike the unscoped <code>beaker.hyperdrive</code> calls, only paths can be provided to the operations. <em> <strong>url</strong> String. The URL of the drive to access. </em> Returns <strong>Hyperdrive</strong>. <em> <strong>url</strong> String. The URL of the hyperdrive. </em> <strong>version</strong> String. The checked-out version of the instance. Will be undefined if using latest. <em> <strong>checkout</strong>(version): Hyperdrive. Returns a <code>Hyperdrive</code> instance at the given version. </em> <strong>watch</strong>(path, onChanged): EventTarget. Emits a &#39;changed&#39; event when writes occur. Does not emit any change events for mounted drives within the parent drive. <em> ...most methods on <code>beaker.hyperdrive</code>. <code>javascript var drive = beaker.hyperdrive.drive(&#39;hyper://1234..ef&#39;) await drive.readdir(&#39;/&#39;)</code> ### beaker.hyperdrive.createDrive([settings]) Create a new Hyperdrive. </em> <strong>settings</strong> Object. <em> <strong>title</strong> String. The title of the hyperdrive. </em> <strong>description</strong> String. The description of the hyperdrive. <em> <strong>tags</strong> String. A space-separated list of tags to assign to the drive in the library. </em> <strong>prompt</strong> Boolean. Should the creation prompt show? If false, permission will still be requested. <em> Returns <strong>Promise<Hyperdrive></strong>. <code>javascript var drive = await beaker.hyperdrive.createDrive({ title: &#39;My cool website&#39;, description: &#39;Demonstrating how to create Hyperdrives&#39; })</code> ### beaker.hyperdrive.forkDrive(url[, opts]) Creates a &quot;fork or copy drive&quot; prompt. The user will use this to copy the files and settings of a hyperdrive into a new drive, optionally overriding some settings. </em> <strong>url</strong> String. The URL of the drive to fork. <em> <strong>opts</strong> Object. </em> <strong>detached</strong> Boolean. If false, will create an &quot;attached&quot; fork. If true, will create a detached copy. Default false. <em> <strong>title</strong> String. Overrides the title. Only applies if <code>detached</code> is true. </em> <strong>description</strong> String. Overrides the description. Only applies if <code>detached</code> is true. <em> <strong>tags</strong> String. A space-separated list of tags to assign to the drive in the library. </em> <strong>prompt</strong> Boolean. If true, shows the &quot;fork&quot; modal. If false, only asks the user for permission. Default true. <em> Returns <strong>Promise<Hyperdrive></strong>. <code>javascript var myFork = await beaker.hyperdrive.forkDrive(existingDriveUrl) var myCopy = await beaker.hyperdrive.forkDrive(existingDriveUrl, {detached: true})</code> ### beaker.hyperdrive.getInfo(url[, opts]) Fetch metadata and system information about the hyperdrive. </em> <strong>url</strong> String. The URL of the hyperdrive to query. (Not required on <code>Hyperdrive</code> objects returned by <a href="beaker.hyperdrive.md#beakerhyperdrivedriveurl">beaker.hyperdrive.drive()</a>.) <em> <strong>opts</strong> Object. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Object></strong>. </em> <strong>key</strong> String. The key of the hyperdrive. <em> <strong>url</strong> String. The URL of the hyperdrive. </em> <strong>writable</strong> Boolean. Can the local user modify the hyperdrive? <em> <strong>version</strong> Number. The latest revision number of the hyperdrive. </em> <strong>title</strong> String. The title of the hyperdrive. <em> <strong>description</strong> String. The description of the hyperdrive. <code>javascript var info = await beaker.hyperdrive.getInfo(&#39;hyper://1234..ef&#39;)</code> ### beaker.hyperdrive.stat(url[, opts]) Get metadata about a file. </em> <strong>url</strong> String. The url to the file. <em> <strong>opts</strong> Object. </em> <strong>lstat</strong> Boolean. If the file is a symlink, give information about the symlink instead of the link target. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Object></strong>. <em> <strong>isFile()</strong> Function(): Boolean. Is the entry a file? </em> <strong>isDirectory()</strong> Function(): Boolean. Is the entry a directory? <em> <strong>size</strong> Number. The size of the file in bytes. </em> <strong>blocks</strong> Number. The size of the file in blocks in the content hypercore. <em> <strong>mtime</strong> Number. The timestamp of the last modification of the file. </em> <strong>ctime</strong> Number. The timestamp of the creation of the file. <em> <strong>mount</strong> Object. Information about the target mount if the entry is a mount. </em> <strong>key</strong> String. The key of the mount target. <em> <strong>version</strong> Number. The version of the mount target, if specified. </em> <strong>metadata</strong> Object. User metadata attached to the entry. <em> <strong>linkname</strong> String. If a symlink, gives the target path. <code>javascript var stat = await beaker.hyperdrive.stat(&#39;hyper://1234..ef/index.json&#39;)</code> ### beaker.hyperdrive.readFile(url[, opts]) Read the contents of a file. </em> <strong>url</strong> String. The url to the file. <em> <strong>opts</strong> Object | String. If a String, will act as the &#39;encoding&#39; option. </em> <strong>encoding</strong> String. Desired output encoding. May be &#39;binary&#39;, &#39;utf8&#39;, &#39;hex&#39;, &#39;json&#39;, or &#39;base64&#39;. Default &#39;utf8&#39;. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<String \| Uint8Array></strong> <code>javascript var fileStr = await beaker.hyperdrive.readFile(&#39;hyper://1234..ef/foo.txt&#39;) var fileObj = await beaker.hyperdrive.readFile(&#39;hyper://1234..ef/foo.json&#39;, &#39;json&#39;) var imgBuf = await beaker.hyperdrive.readFile(&#39;hyper://1234..ef/bar.png&#39;, &#39;binary&#39;) var imgBase64 = await beaker.hyperdrive.readFile(&#39;hyper://1234..ef/bar.png&#39;, &#39;base64&#39;)</code> ### beaker.hyperdrive.readdir(url[, opts]) Read the contents of a directory. <em> <strong>url</strong> String. The url to the directory. </em> <strong>opts</strong> Object. <em> <strong>includeStats</strong> Boolean. Should the output include the &#39;stats&#39; object for each entry? </em> <strong>recursive</strong> Boolean. Recurse into subfolders? <em> Note: does not recurse into child mounts. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Array<String \| Object>&gt;</strong> </em> If an object, the shape will be <code>{ name, stat }</code> <code>javascript var files = await beaker.hyperdrive.readdir(&#39;hyper://1234..ef/&#39;) var allFiles = await beaker.hyperdrive.readdir(&#39;hyper://1234..ef/&#39;, {recursive: true}) var filesWithStats = await beaker.hyperdrive.readdir(&#39;hyper://1234..ef/&#39;, {includeStats: true})</code> ### beaker.hyperdrive.query(query) Read the contents of a drive or drives across multiple specified paths. This function can be used to read a wide range of files while filtering by multiple various attributes. If Hyperdrive were a SQL database, this would be the SELECT function. <em> <strong>query</strong> Object. </em> <strong>drive</strong> String | Array<String>. The drive(s) to query against. <em> <strong>path</strong> String | Array<String>. The path(s) to query against. May use globbing patterns (&#39;\</em>&#39;) to specify multiple files. <em> <strong>type</strong> String. Filters results to entries of this type. May be &#39;file&#39;, &#39;directory&#39;, or &#39;mount&#39;. </em> <strong>mount</strong> String (URL). Filters results to mounts which point to the drive specified here. <em> <strong>metadata</strong> Object. Filters results by their metadata against the key-values specified here. </em> <strong>sort</strong> String. Specifies which attribute to sort the results by. May be &#39;name&#39;, &#39;ctime&#39;, or &#39;mtime&#39;. <em> <strong>reverse</strong> Boolean. If true, the result order will be reversed. </em> <strong>limit</strong> Number. Specifies a maximum number of results to return. <em> <strong>offset</strong> Number. Specifies a starting offset within the results. Used for pagination. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Array<Object>&gt;</strong> </em> <strong>type</strong> String. The type of the entry. Must be &#39;file&#39;, &#39;directory&#39;, or &#39;mount&#39;. <em> <strong>path</strong> String. The path of the entry relative to the queried drive. </em> <strong>url</strong> String. The URL of the entry relative to the queried drive. <em> <strong>stat</strong> Object. The entry&#39;s Stat object, see stat(). </em> <strong>drive</strong> String. The URL of the queried drive. <em> <strong>mount</strong> String. The URL of the target drive if the entry is a mount. </em> <strong>origin</strong> Object. <em> <strong>path</strong> String. The path of the entry relative to its owning drive. </em> <strong>drive</strong> String. The URL of the entry&#39;s owning drive. <em> <strong>url</strong> String. The URL of the entry relative to its owning drive. ```javascript var rootFiles = await beaker.hyperdrive.query({ drive: &#39;hyper://1234..ef&#39;, path: &#39;/</em>&#39;, type: &#39;file&#39; }) var rootImgs = await beaker.hyperdrive.query({ drive: &#39;hyper://1234..ef&#39;, path: [&#39;/<em>.png&#39;, &#39;/</em>.jpg&#39;, &#39;/<em>.jpeg&#39;] }) var postFiles = await beaker.hyperdrive.query({ drive: &#39;hyper://1234..ef&#39;, path: &#39;/microblog/</em>&#39;, sort: &#39;ctime&#39; }) var followMounts = await beaker.hyperdrive.query({ drive: &#39;hyper://1234..ef&#39;, path: &#39;/follows/<em>&#39;, type: &#39;mount&#39; }) var bobFollow = await beaker.hyperdrive.query({ drive: &#39;hyper://1234..ef&#39;, path: &#39;/follows/</em>&#39;, mount: bobsUrl }) var commentsOnBeaker = await beaker.hyperdrive.query({ drive: &#39;hyper://1234..ef&#39;, path: &#39;/comments/<em>&#39;, metadata: {href: &#39;<a href="https://beakerbrowser.com&#39;}">https://beakerbrowser.com&#39;}</a> }) ``` ### beaker.hyperdrive.diff(url, other[, prefix, opts]) List the changes that have occurred between two versions of the drive. Note: this method can only compare drives to other versions of itself. It cannot be used to compare two different drives. </em> <strong>url</strong> String. The URL to diff. <em> <strong>other</strong> Number|String|Hyperdrive. The version ID or hyperdrive instance to compare against. </em> <strong>opts</strong> Object. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Array<Object>&gt;</strong> <em> type String. What operation occurred. One of: &#39;put&#39;, &#39;del&#39;, &#39;mount&#39;, &#39;unmount&#39;. </em> name String. The path of the modified entry. <em> <strong>value</strong> Object. Information related to the change (e.g. the &#39;stat&#39; object of a put file). <code>javascript var changes = await beaker.hyperdrive.diff(&#39;hyper://1234..ef&#39;, 5) // diff latest against revision 5</code> ### beaker.hyperdrive.configure(url, settings[, opts]) Update the settings and/or manifest (index.json) of the drive. </em> <strong>url</strong> String. The URL of the drive to configure. <em> <strong>settings</strong> Object. </em> <strong>title</strong> String. The title of the drive. <em> <strong>description</strong> String. The description of the drive. </em> <strong>opts</strong> Object. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.configure(&#39;hyper://1234..ef&#39;, { title: &#39;The drive title&#39;, description: &#39;The drive description&#39; })</code> ### beaker.hyperdrive.writeFile(url, data[, opts]) Write a file to the drive. <em> <strong>url</strong> String. The URL of the file to write. </em> <strong>data</strong> String|Uint8Array. The content to write. <em> <strong>opts</strong> String|Object. If a string, acts as the encoding parameter. </em> <strong>encoding</strong> String. The encoding of the data parameter. Must be &#39;utf8&#39;, &#39;base64&#39;, &#39;hex&#39;, &#39;json&#39;, or &#39;binary&#39;. Defaults to &#39;utf8&#39; if data is a string and &#39;binary&#39; if data is an Uint8Array. <em> <strong>metadata</strong> Object. The metadata to write to the file. Even if unspecified </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.writeFile(&#39;hyper://1234..ef/foo.txt&#39;, &#39;Foo&#39;) await beaker.hyperdrive.writeFile(&#39;hyper://1234..ef/foo.json&#39;, {hello: &#39;world&#39;}, &#39;json&#39;) await beaker.hyperdrive.writeFile(&#39;hyper://1234..ef/foo.png&#39;, imgPngBase64, &#39;base64&#39;) await beaker.hyperdrive.writeFile(&#39;hyper://1234..ef/foo.jpg&#39;, imgJpgUint8Array, {encoding: &#39;binary&#39;}) await beaker.hyperdrive.writeFile(&#39;hyper://1234..ef/foo.md&#39;, &#39;# Markdown Doc&#39;, { metadata: {title: &#39;Markdown Doc&#39;} })</code> ### beaker.hyperdrive.mkdir(url[, opts]) Create a folder on the drive. </em> <strong>url</strong> String. The URL of the folder to create. <em> <strong>opts</strong> Object. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.mkdir(&#39;hyper://1234..ef/sub&#39;)</code> ### beaker.hyperdrive.symlink(target, url[, opts]) Create a symlink on the drive. Good luck getting the argument order right the first time! </em> <strong>target</strong> String. The URL which the symlink should point to. <em> <strong>url</strong> String. Where to place the symlink. </em> <strong>opts</strong> Object. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.symlink(&#39;hyper://1234..ef/this-file-already-exists.txt&#39;, &#39;hyper://1234..ef/the-symlink.txt&#39;)</code> ### beaker.hyperdrive.mount(url, mount[, opts]) Create a mount on the drive to some other drive. (Mounts are like symlinks that work across hyperdrives.) Note: we know, we know, the argument order is the opposite of symlink. <em> <strong>url</strong> String. Where to place the mount. </em> <strong>mount</strong> String|Object|Hyperdrive. The drive to mount. If a String or Hyperdrive, acts as the key attribute. <em> <strong>key</strong> String. The key of the drive to mount. </em> <strong>version</strong> Number|String. The version to pin the mount to. If undefined, the mount will point to latest. <em> <strong>opts</strong> Object. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.mount(&#39;hyper://1234..ef/mount&#39;, &#39;hyper://fedcb..12&#39;) await beaker.hyperdrive.mount(&#39;hyper://1234..ef/mount2&#39;, {key: &#39;fedcb..12&#39;, version: 10})</code> ### beaker.hyperdrive.copy(src, dst[, opts]) Copy a file or folder. Works across hyperdrives. </em> <strong>src</strong> String. Where to copy the files from. <em> <strong>dst</strong> String. Where to copy the files to. </em> <strong>opts</strong> Object. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.copy(&#39;hyper://1234..ef/foo.txt&#39;, &#39;hyper://1234..ef/bar.txt&#39;)</code> ### beaker.hyperdrive.rename(src, dst[, opts]) Move a file or folder. Works across hyperdrives. <em> <strong>src</strong> String. Where to move the files from. </em> <strong>dst</strong> String. Where to move the files to. <em> <strong>opts</strong> Object. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.rename(&#39;hyper://1234..af/foo.txt&#39;, &#39;hyper://1234..af/bar.txt&#39;)</code> ### beaker.hyperdrive.updateMetadata(url, metadata[, opts]) Modify the metadata on a file. Merges into the existing metadata of the file. </em> <strong>url</strong> String. The URL of the file to modify. <em> <strong>metadata</strong> Object. The metadata values to set. </em> <strong>opts</strong> Object. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.updateMetadata(&#39;hyper://1234..ef/foo.txt&#39;, {title: &#39;Foo&#39;})</code> ### beaker.hyperdrive.unlink(url[, opts]) Deletes a file on the drive. <em> <strong>url</strong> String. The URL of the file to delete. </em> <strong>opts</strong> Object. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.unlink(&#39;hyper://1234..ef/foo.txt&#39;)</code> ### beaker.hyperdrive.rmdir(url[, opts]) Deletes a folder on the drive. <em> <strong>url</strong> String. The URL of the folder to delete. </em> <strong>opts</strong> Object. <em> <strong>recursive</strong> Boolean. Delete the files within the folder if it&#39;s not empty. Default false. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.rmdir(&#39;hyper://1234..ef/sub&#39;) await beaker.hyperdrive.rmdir(&#39;hyper://1234..ef/sub2&#39;, {recursive: true})</code> ### beaker.hyperdrive.unmount(url[, opts]) Remove a mount on the drive. </em> <strong>url</strong> String. The URL of the mount to delete. <em> <strong>opts</strong> Object. </em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. <em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.unmount(&#39;hyper://1234..ef/mount&#39;)</code> ### beaker.hyperdrive.deleteMetadata(url, keys[, opts]) Remove metadata keys from the file. </em> <strong>url</strong> String. The URL of the file to modify. <em> <strong>keys</strong> String|Array<String>. The key or keys to delete. </em> <strong>opts</strong> Object. <em> <strong>timeout</strong> Number (ms). How long to wait for the operation to complete before throwing a timeout error. Defaults to 60000. </em> Returns <strong>Promise<Void></strong> <code>javascript await beaker.hyperdrive.deleteMetadata(&#39;hyper://1234..ef/foo.txt&#39;, &#39;title&#39;) await beaker.hyperdrive.deleteMetadata(&#39;hyper://1234..ef/bar.txt&#39;, [&#39;title&#39;, &#39;href&#39;])</code></p>
